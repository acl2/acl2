<HTML>
<HEAD><TITLE>ACL2 Version 8.3 Installation Guide: Requirements</TITLE></HEAD>

<BODY TEXT="#000000" BGCOLOR="#FFFFFF" STYLE="font-family:'Verdana'">

<H1>Requirements</A></H1>

<b><font>[<a href="installation.html">Back to main page of Installation Guide.</a>]</font></b>

<p><hr size=3 noshade></p>

<p>ACL2 Version 8.3<br> Copyright (C) 2020, Regents of the University of
Texas</p>

<p>ACL2 is licensed under the terms of
the <a href="../LICENSE">LICENSE</a>
file distributed with ACL2.  See also the documentation topic,
<a href="../../manual/index.html?topic=ACL2____COPYRIGHT">COPYRIGHT</a>.</p>

<p><hr size=3 noshade></p>

<H3>Table of Contents</H3>

<UL>
  <LI><A HREF="#Performance">Performance comparisons</A>
  <LI><A HREF="#Obtaining-Lisp">Obtaining Common Lisp</A> (alphabetical listing)
  <UL>
    <LI><A HREF="#Obtaining-Allegro">Obtaining Allegro Common Lisp</A>
    <LI><A HREF="#Obtaining-CCL">Obtaining CCL (OpenMCL)</A>
    <LI><A HREF="#Obtaining-GCL">Obtaining GCL</A>
    <LI><A HREF="#Obtaining-LispWorks">Obtaining LispWorks</A>
    <LI><A HREF="#Obtaining-SBCL">Obtaining SBCL</A>
  </UL>
</UL>

<p><hr size=3 noshade></p>

<H3><A NAME="Performance">Performance comparisons</A></H3>

<p>You can see recent performance numbers by following <a
href="http://www.cs.utexas.edu/users/moore/acl2/v8-3/HTML/new.html#performance">this
link</a>, or by going to the <a
href="http://www.cs.utexas.edu/users/moore/acl2/">ACL2 home page on
the web</a> and following the link "Recent changes to this page".</p>

<H3><A NAME="Obtaining-Lisp">Obtaining Common Lisp</A></H3>

<p>ACL2 has been built and tested on x86-64 Linux and on Mac OS X
(Darwin), which we call "Unix-like systems", as well as (from time to
time) some Windows operating systems.  It may run on other platforms
as well (for example, on top of FreeBSD or running on ARM
architectures), but we have not tested them.  It can be built on top
of any of the following Common Lisps, listed here alphabetically.</p>

<ul>
<LI><A HREF="#Obtaining-Allegro">Allegro Common Lisp</A></B><P>
<LI><A HREF="#Obtaining-CCL">CCL (OpenMCL)</A></B><P>
<LI><A HREF="#Obtaining-GCL">GCL</A></B><P>
<LI><A HREF="#Obtaining-LispWorks">LispWorks</A></B><P>
<LI><A HREF="#Obtaining-SBCL">SBCL</A></B><P>
</ul>

<p>ACL2 has also been built on CMUCL, but not tested as extensively on
that host Lisp as on the ones above.</p>

<P><B><A NAME="Obtaining-Allegro">Obtaining Allegro Common Lisp</A></B></P>

<p>The website for Allegro Common Lisp, a commercial implementation, is
<code><a href="http://www.franz.com/">http://www.franz.com/</a></code>.
You may be able to obtain a trial version there.</p>

<P><B><A NAME="Obtaining-CCL">Obtaining CCL (OpenMCL)</A></B></P>

<p>Clozure Common Lisp (Clozure CL, or CCL) was formerly known as
OpenMCL.  Quoting from the <a href="http://ccl.clozure.com/">Clozure
Common Lisp web page</a> (July, 2014): ``Some distinguishing features
of the implementation include fast compilation speed, native threads,
a precise, generational, compacting garbage collector, and a
convenient foreign-function interface.''</p>

<p><font color="red">NOTE</font>:
Certain <a href="http://www.cs.utexas.edu/users/moore/acl2/current/combined-manual/index.html?topic=ACL2____HONS-ENABLED">ACL2
features</a> are optimized for 64-bit CCL.  Some large developments
may even fail with 32-bit CCL; so for CCL, the 64-bit version is
preferred.  To check if your CCL is a 64-bit CCL, evaluate the
following expression in your CCL; the result should
be <code>YES</code>.</p>

<pre>
#+x86_64 'yes #-x86_64 'no
</pre>

<p>Here
are <a href="http://www.cs.utexas.edu/users/moore/acl2/manuals/latest/index.html?topic=ACL2____CCL-INSTALLATION">instructions
for fetching and installing CCL</a>.</p>

<P><B><A NAME="Obtaining-GCL">Obtaining GCL</A></B></P>

<p>You might be able
to <A HREF="http://packages.qa.debian.org/a/acl2.html">download a
binary Debian package for ACL2</A>.  Thanks to Camm Maguire for
maintaining this package.  Note however that it may take some time
after each ACL2 release for this binary Debian package to be updated
for that release.</p>

<p>Otherwise, it should be easy to obtain and build GCL yourself.  Note
that ACL2 requires ANSI GCL version 2.6.12 or later.  Perhaps simplest
is to fetch it via git and then build the
executable <code>gcl/gcl/bin/gcl</code> as follows.</p>

<pre>
git clone git://git.sv.gnu.org/gcl.git
cd gcl/gcl
git checkout Version_2_6_13pre
./configure --enable-ansi && make
</pre>

<p>It may also be possible to fetch it from
the <a href="http://www.gnu.org/software/gcl/">main GNU website for
GCL</a> or perhaps
from <code><a href="http://backports.debian.org">backports.debian.org</a></code>,
in which case ANSI GCL can be built as shown above:</p>

<pre>
cd gcl && ./configure --enable-ansi && make
</pre>

<P><B><A NAME="Obtaining-LispWorks">Obtaining LispWorks</A></B></P>

<p>LispWorks is a commercial Common Lisp implementation. You can download
a free, restricted, version
from <code><a href="http://www.lispworks.com/">http://www.lispworks.com/</a></code>.
You may ask the vendor for an evaluation license for the full product
if you are considering purchasing a license.</p>

<P><B><A NAME="Obtaining-SBCL">Obtaining SBCL</A></B></P>

<p>SBCL (Steel Bank Common Lisp) is a non-commercial Common Lisp
implementation, available
from <code><a href="http://sbcl.sourceforge.net/">http://sbcl.sourceforge.net/</a></code>.
You may be able to download a suitable binary distribution from that
website, but for some of the older versions (such as 1.2.11, which as
of April 2020 has been the latest binary available for MacOS from
that website for some years), you will not be able to certify some of
the community books.  If you download a binary, you can check that the
form <code>(member :sb-thread *features*)</code> evaluates to a value
other than <code>NIL</code>.  To avoid this issue you can build from
source, following instructions from the <code>INSTALL</code> file of
the SBCL distribution using this command:</p>

<pre>
sh make.sh --with-sb-thread
</pre>

<p>If you try to run large jobs using ACL2 built on SBCL (version
  1.2.11 or later), such as building the ACL2+books combined manual,
  you may fail with an error, "Immobile space exhausted".  We have
  avoided this error by building SBCL from source rather than
  obtaining a binary, using options as follows:</p>

<pre>
sh make.sh --without-immobile-space --without-immobile-code --without-compact-instance-header
</pre>

<p>Rather comparable test runs produced a significant speed-up when
building with the options above, as shown by the following results
when using the "time" command for such runs.</p>

<pre>
;;; before using the options above in the build
85597.939u 1357.892s 3:27:15.73 699.2%  0+0k 1677680+7635408io 607pf+0w

;;; after using the options above in the build
72693.740u 1565.148s 2:58:36.10 692.9%  0+0k 3778176+7630768io 1250pf+0w
</pre>

<p><i>Further troubleshooting with SBCL</i></p>

<p>(1) The default SBCL may provide insufficient heap memory to build
  ACL2.  The SBCL option <code>--dynamic-space-size 2000</code> has
  been found to solve that problem, for example using a script like
  the following for SBCL.</p>

<pre>
#!/bin/sh
&lt;sbcl-dir-path&gt;/run-sbcl.sh --dynamic-space-size 2000 "$@"
</pre>

<p>(2) We have seen the error, "An mprotect call failed with ENOMEM."
A solution has been to rebuild the SBCL executable  after editing the
  SBCL source file <code>src/compiler/x86-64/parms.lisp</code>,
  replacing the line<br/>
<code>(defconstant gencgc-card-bytes +backend-page-bytes+)</code><br/>
by the following line.<br/>
<code>(defconstant gencgc-card-bytes (* 2 +backend-page-bytes+))</code></p>

<p><b><font size="+2">[<a href="installation.html">Back to Installation Guide.</a>]</font></b></p>

<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>

</BODY>
</HTML>
